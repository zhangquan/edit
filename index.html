<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>

        <title>zhangquan</title>

        <script type="text/javascript" src="assets/jquery-1.6.2.min.js"></script>
        <script type="text/javascript" src ="assets/json2.js"></script>
        <link rel="stylesheet" href="assets/editor.css" type="text/css" />
        <script type="text/javascript" src ="assets/tokens.js"></script>
        <script type="text/javascript" src ="assets/parse.js"></script>
        <script type="text/javascript" src ="assets/editor.js"></script>
        <script type="text/javascript" src ="assets/lighter.js"></script>




    <body>

        <div class="main">



            <div id="editor" class="editor">
                <div class="line-num"></div>
                <div class="source">
                    <div class="selection">
                        <div class="range first"></div>
                        <div class="range center"></div>
                        <div class="range last"></div>
                    </div>
                    <div class="cursor"></div>
                    <textarea class="input"></textarea>
                    <div class="text"></div>
                </div>

            </div><textarea class="cmd">run</textarea>




            <div style="display:none">   <div><a href="#" onclick="showValue()">value</a>  <a href="#" onclick="showParse()">parse</a></div>

                <pre class="log"></pre>
            </div>




        </div>
        <pre style="display:none" id="code">


function showValue(){
    $(".log").html(editor.doc.getValue());
}

var showError = function(msg){
    $(".log").html($(".log").html( )+msg+"<br>")
}

function showParse(){
    var t = tokens(editor.doc.getValue())
    $(".log").html(JSON.stringify(t));
}
alert(234);
        </pre>
        <script type="text/javascript">
          

            

            var editor =  new Editor($("#code").text())
            
            
            
 
            function showValue(){
                $(".log").html(editor.doc.getValue());
            }
            var showError = function(msg){
                $(".log").html($(".log").html( )+msg+"<br>")
            }
            
            function showParse(){
                
                var t = tokens(editor.doc.getValue())
                $(".log").html(JSON.stringify(t));
            }
            
            
            var cmd = $(".cmd");
            cmd.bind("keydown",function(ev){
                var keyCode= ev.keyCode;
                console.log(keyCode);
                if(keyCode =="13"){
                    var valueArray = editor.doc._split($.trim(cmd.val()));
                    var value = valueArray[valueArray.length-1];
                    console.log(valueArray);
                    if(value == "run"){ 
                        var t = (editor.doc.getValue());
                        eval(t);
                    } 
                    
    
                }
            })



        </script>


    </body>
</html>